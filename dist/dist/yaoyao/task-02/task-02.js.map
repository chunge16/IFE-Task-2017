{"version":3,"sources":["../../../yaoyao/task-02/task-02.js"],"names":["window","onload","addClass","el","csName","hasClass","className","removeClass","re","RegExp","replace","match","isASCII","char","codePointAt","getStrLength","str","enlen","zhlen","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","next","done","value","err","return","verifyStyle","obj","isok","getFocus","e","parentElement","nextElementSibling","style","display","init","name","document","getElementById","Password","rePassword","email","phone","form","querySelectorAll","inputs","Array","from","nameHint","getElementsByClassName","PasswordHint","rePasswordHint","emailHint","phoneHint","submit","pwdRe","emailRe","phoneRe","forEach","val","onfocus","onblur","strLength","minLen","maxLen","innerText","trim","test","value2","onclick","alert"],"mappings":"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","file":"task-02.js","sourcesContent":["'use strict';\n\n/**\n * Created by shi on 2017/4/14.\n */\nwindow.onload = function () {\n\n    //元素添加class\n    function addClass(el, csName) {\n        if (!hasClass(el, csName)) {\n            el.className += ' ' + csName;\n        }\n    }\n\n    //元素删除class\n    function removeClass(el, csName) {\n        var re = new RegExp('(\\\\s|^)' + csName + '(\\\\s|$)');\n        if (hasClass(el, csName)) {\n            el.className = el.className.replace(re, '');\n        }\n    }\n\n    //class是否重复\n    function hasClass(el, csName) {\n        //公共常量定义\n        var re = new RegExp('(\\\\s|^)' + csName + '(\\\\s|$)');\n\n        if (el.className.match(re)) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    //是否是ASCII\n    function isASCII(char) {\n        return char.codePointAt(0) <= 0xFF;\n    }\n\n    //验证名称格式和长度\n    function getStrLength(str) {\n        var enlen = 0,\n            zhlen = 0;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n            for (var _iterator = str[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var char = _step.value;\n\n                if (isASCII(char)) {\n                    enlen++;\n                } else {\n                    zhlen++;\n                }\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        return enlen + zhlen * 2;\n    }\n\n    //验证样式变化\n    function verifyStyle(obj, isok) {\n\n        if (isok) {\n            removeClass(obj, 'has-error');\n            addClass(obj, 'has-success');\n        } else {\n            removeClass(obj, 'has-success');\n            addClass(obj, 'has-error');\n        }\n    }\n\n    //获得焦点\n    function getFocus(e) {\n        removeClass(e.parentElement, 'has-success');\n        removeClass(e.parentElement, 'has-error');\n        if (e) {\n            e.parentElement.nextElementSibling.style.display = 'block';\n        }\n    }\n\n    function init() {\n        var name = document.getElementById('name'),\n            Password = document.getElementById('Password'),\n            rePassword = document.getElementById('rePassword'),\n            email = document.getElementById('email'),\n            phone = document.getElementById('phone'),\n            form = document.querySelectorAll('.group'),\n            inputs = Array.from(document.querySelectorAll('.group input'));\n\n        var nameHint = document.getElementsByClassName('name-hint')[0],\n            PasswordHint = document.getElementsByClassName('Password-hint')[0],\n            rePasswordHint = document.getElementsByClassName('rePasswordHint')[0],\n            emailHint = document.getElementsByClassName('email-hint')[0],\n            phoneHint = document.getElementsByClassName('phone-hint')[0],\n            submit = document.getElementsByClassName('btn-submit')[0];\n\n        var pwdRe = /^\\d{6}$/,\n            emailRe = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/,\n            phoneRe = /^(13[0-9]|14[5|7]|15[0-9]|18[0-9])\\d{8}$/;\n\n        //获得焦点\n        inputs.forEach(function (val) {\n            val.onfocus = function () {\n                getFocus(val);\n            };\n        });\n\n        //失去焦点\n        name.onblur = function () {\n            var value = name.value,\n                strLength = getStrLength(value);\n\n            var minLen = 4,\n                maxLen = 16;\n\n            if (strLength === 0 || value === null || value === '') {\n                verifyStyle(nameHint.parentElement, false);\n                //HTML DOM classList 属性 支持添加class和删除class，但是注意兼容性IE10以上\n                // form.classList.add('has-error');\n                // form.classList.remove('has-success');\n                nameHint.innerText = '输入不能为空！';\n            } else if (strLength < minLen) {\n                verifyStyle(nameHint.parentElement, false);\n                nameHint.innerText = '字符长度不能小于4！';\n            } else if (strLength > maxLen) {\n                verifyStyle(nameHint.parentElement, false);\n                nameHint.innerText = '字符长度不能大于16！';\n            } else {\n                verifyStyle(nameHint.parentElement, true);\n                nameHint.innerText = '恭喜你，输入格式正确！';\n            }\n        };\n\n        Password.onblur = function () {\n            var value = Password.value.trim();\n\n            if (!value) {\n                verifyStyle(PasswordHint.parentElement, false);\n                PasswordHint.innerText = '输入不能为空';\n            } else if (!pwdRe.test(value)) {\n                verifyStyle(PasswordHint.parentElement, false);\n                PasswordHint.innerText = '密码不可用';\n            } else if (pwdRe.test(value)) {\n                verifyStyle(PasswordHint.parentElement, true);\n                PasswordHint.innerText = '密码可用';\n            }\n        };\n\n        rePassword.onblur = function () {\n            var value2 = rePassword.value.trim(),\n                value = Password.value.trim();\n\n            if (!value2) {\n                verifyStyle(rePasswordHint.parentElement, false);\n                rePasswordHint.innerText = '输入不能为空';\n            } else if (!pwdRe.test(value2)) {\n                verifyStyle(rePasswordHint.parentElement, false);\n                rePasswordHint.innerText = '密码格式不对';\n            } else if (value !== value2) {\n                verifyStyle(rePasswordHint.parentElement, false);\n                rePasswordHint.innerText = '密码输入不一致';\n            } else if (pwdRe.test(value2) && value === value2) {\n                verifyStyle(rePasswordHint.parentElement, true);\n                rePasswordHint.innerText = '密码输入一致';\n            }\n        };\n\n        email.onblur = function () {\n            var value = email.value;\n\n            if (!value) {\n                verifyStyle(emailHint.parentElement, false);\n                emailHint.innerText = '输入不能为空';\n            } else if (!emailRe.test(value)) {\n                verifyStyle(emailHint.parentElement, false);\n                emailHint.innerText = \"邮箱格式不对\";\n            } else if (emailRe.test(value)) {\n                verifyStyle(emailHint.parentElement, true);\n                emailHint.innerText = '邮箱格式正确';\n            }\n        };\n\n        phone.onblur = function () {\n            var value = phone.value;\n\n            if (!value) {\n                verifyStyle(phoneHint.parentElement, false);\n                phoneHint.innerText = '输入不能为空';\n            } else if (!phoneRe.test(value)) {\n                verifyStyle(phoneHint.parentElement, false);\n                phoneHint.innerText = \"手机格式不对\";\n            } else if (phoneRe.test(value)) {\n                verifyStyle(phoneHint.parentElement, true);\n                phoneHint.innerText = '手机格式正确';\n            }\n        };\n\n        //submit\n        submit.onclick = function () {\n            var isok = true;\n\n            name.onblur();\n            Password.onblur();\n            rePassword.onblur();\n            email.onblur();\n            phone.onblur();\n\n            form = Array.from(form);\n            form.forEach(function (val) {\n                if (hasClass(val, 'has-error')) {\n                    isok = false;\n                }\n            });\n\n            if (isok) {\n                alert('提交成功');\n            } else {\n                alert('提交失败');\n            }\n        };\n    }\n\n    init();\n};\n//# sourceMappingURL=task-02.js.map"]}