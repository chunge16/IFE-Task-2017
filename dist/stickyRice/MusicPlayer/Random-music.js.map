{"version":3,"sources":["../../../stickyRice/MusicPlayer/Random-music.js"],"names":["window","onload","init","audios","document","getElementById","app","Vue","el","data","loop","imgSrc","channelId","song","seen","picture","url","songName","artist","paused","animationPlayState","isPlaying","created","getChannel","getMusic","methods","play","pause","nextSong","axios","get","then","response","console","log","channels","num","Math","floor","random","length","channel_id","bind","catch","error","channel","params","title","src","songLoop","addEventListener"],"mappings":"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","file":"Random-music.js","sourcesContent":["/**\n * Created by shi on 2017/5/3.\n */\n\n\nwindow.onload = function () {\n\n    function init() {\n\n        const audios = document.getElementById('audios');\n\n        let app = new Vue({\n            el: '#fm',\n            data: {\n                loop: {\n                    imgSrc: 'imgs/icon_order.png'\n                },\n                channelId: 0,\n                song: {\n                    seen: false,\n                    picture: '',\n                    url: '',\n                    songName: '',\n                    artist: ''\n                },\n                paused: {\n                    animationPlayState: \"running\"\n                },\n                isPlaying: false\n            },\n            created: function () {\n                this.getChannel();\n                this.getMusic(this.channelId);\n            },\n            methods: {\n                //播放和暂停\n                play: function () {\n                    if(audios.paused){\n                        this.song.seen = false;\n                        this.paused = {\n                            animationPlayState: \"running\"\n                        };\n                        if(!this.isPlaying){\n                            audios.play();\n                            this.isPlaying = true;\n                        }\n                    }\n                    else {\n                        this.song.seen = true;\n                        this.paused = {\n                            animationPlayState: \"paused\"\n                        }\n                        if(this.isPlaying){\n                            audios.pause();\n                            this.isPlaying = false;\n                        }\n\n                    }\n                },\n                //随机下一首\n                nextSong: function () {\n                    if(this.song.seen){\n                        this.song.seen = false;\n                        this.getMusic(this.channelId);\n                    }\n                    else {\n                        this.getMusic(this.channelId);\n                    }\n                },\n                getChannel: function () {\n                    axios.get('http://api.jirengu.com/fm/getChannels.php')\n                        .then(function (response) {\n                            console.log(response.data);\n                            let channels = response.data.channels;\n                            let num = Math.floor(Math.random()*channels.length);\n\n                            this.channelId = channels[num].channel_id;\n                            console.log(this.channelId);\n\n                        }.bind(this))\n                        .catch(function (error) {\n                            console.log(error);\n                        });\n                },\n                getMusic: function (channel) {\n                    axios.get('http://api.jirengu.com/fm/getSong.php', {\n                        params: {\n                            \"channel\": channel\n                        }\n                    })\n                        .then(function (response) {\n                            console.log(response.data);\n                            let song = response.data.song[0];\n                            this.song = {\n                                seen: false,\n                                picture: song.picture,\n                                url: song.url,\n                                songName: song.title,\n                                artist: song.artist\n                            }\n                            audios.src = song.url;\n                            audios.play();\n                            this.isPlaying = true;\n                        }.bind(this))\n                        .catch(function (error) {\n                            console.log(error);\n                        })\n\n                },\n                //是否单曲循环\n                songLoop: function () {\n                    if(audios.loop){\n                        this.loop = {\n                            imgSrc: 'imgs/icon_order.png'\n                        }\n                        audios.loop = false;\n\n                    }\n                    else {\n                        this.loop = {\n                            imgSrc: 'imgs/icon_loop.png'\n                        }\n                        audios.loop = true;\n                    }\n                    console.log(audios.loop);\n                },\n\n\n            }\n        });\n\n        //播放结束下一首\n        audios.addEventListener('ended',function () {\n            if(!audios.loop){\n                app.nextSong();\n            }\n        });\n\n\n\n\n\n    }\n    \n    init();\n\n    //vue v-bind 无法修改  audio  的属性\n\n\n}\n"]}